import{createPinia as e,defineStore as n,storeToRefs as o}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';import{klona as r}from'https://testingcf.jsdelivr.net/npm/klona/+esm';var t={407(e,n,o){o.r(n),o.d(n,{default:()=>d});var r=o(563),t=o.n(r),a=o(185),i=o.n(a)()(t());i.push([e.id,'select[data-v-a55f012c]{border:2px rgba(128,128,128,0.5) solid !important}.k3rn-color-grid[data-v-a55f012c]{display:grid;width:max(80%,400px);grid-template-columns:repeat(2,minmax(0,1fr));font-size:0.8em;font-family:\'Consolas\',Courier,monospace}.k3rn-color-grid>div[data-v-a55f012c]:nth-child(even){width:100%}.k3rn-color-grid>div[data-v-a55f012c]:nth-child(2){background-color:var(--SmartThemeBodyColor,#000)}.k3rn-color-grid>div[data-v-a55f012c]:nth-child(4){background-color:var(--SmartThemeEmColor,#000)}.k3rn-color-grid>div[data-v-a55f012c]:nth-child(6){background-color:var(--SmartThemeUnderlineColor,#000)}.k3rn-color-grid>div[data-v-a55f012c]:nth-child(8){background-color:var(--SmartThemeQuoteColor,#000)}.k3rn-color-grid>div[data-v-a55f012c]:nth-child(10){background-color:var(--SmartThemeBlurTintColor,#000)}.k3rn-color-grid>div[data-v-a55f012c]:nth-child(12){background-color:var(--SmartThemeChatTintColor,#000)}.k3rn-color-grid>div[data-v-a55f012c]:nth-child(14){background-color:var(--SmartThemeUserMesBlurTintColor,#000)}.k3rn-color-grid>div[data-v-a55f012c]:nth-child(16){background-color:var(--SmartThemeBotMesBlurTintColor,#000)}.k3rn-color-grid>div[data-v-a55f012c]:nth-child(18){background-color:var(--SmartThemeShadowColor,#000)}.k3rn-color-grid>div[data-v-a55f012c]:nth-child(20){background-color:var(--SmartThemeBorderColor,#000)}\n','',{version:3,sources:['webpack://./src/下拉选项大修/conf_view.vue'],names:[],mappings:'AA0FA,wBACE,iDACF,CAEA,kCACE,YAAa,CACb,oBAAsB,CACtB,6CAAgD,CAChD,eAAgB,CAChB,wCACF,CAEA,sDACE,UACF,CAcA,mDACE,gDACF,CACA,mDACE,8CACF,CACA,mDACE,qDACF,CACA,mDACE,iDACF,CACA,oDACE,oDACF,CACA,oDACE,oDACF,CACA,oDACE,2DACF,CACA,oDACE,0DACF,CACA,oDACE,kDACF,CACA,oDACE,kDACF',sourcesContent:['<template>\n  <div id="k3rn-dropdown_container" class="extension_container">\n    <div class="k3rn-dropdown-extension-setting">\n      <div class="inline-drawer">\n        <div class="inline-drawer-toggle inline-drawer-header">\n          <b>{{ `下拉选项大修` }}</b>\n          <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>\n        </div>\n        <div class="inline-drawer-content">\n          <div class="k3rn-dropdown-extension_block flex-container">\n            <select>\n              <option>示例选项 - EXAMPLE</option>\n              <option>That is not dead</option>\n              <option>which can eternal lie,</option>\n              <option>And with strange aeons</option>\n              <option>even death may die.</option>\n            </select>\n          </div>\n\n          <hr class="sysHR" />\n\n          <div class="k3rn-dropdown-extension_block flex-container">\n            <h3>{{ `样式修改 (DIY)` }}</h3>\n          </div>\n\n          <div class="k3rn-dropdown-extension_block flex-container">\n            <label for="k3rn-dropdown-extension-setting">{{ `变量对应色表（随酒馆主题变动）` }}</label>\n            <div class="k3rn-color-grid">\n              \x3c!--\n            --SmartThemeEmColor: rgba(150, 150, 150, 1);\n    --SmartThemeUnderlineColor: rgba(79, 154, 255, 0.9);\n    --SmartThemeQuoteColor: rgba(89, 146, 221, 1);\n    --SmartThemeBlurTintColor: rgba(52, 58, 62, 0.8);\n    --SmartThemeChatTintColor: rgba(42, 42, 42, 0);\n    --SmartThemeUserMesBlurTintColor: rgba(32, 32, 32, 0.57);\n    --SmartThemeBotMesBlurTintColor: rgba(0, 0, 0, 0.61);\n    --SmartThemeShadowColor: rgba(32, 33, 36, 1);\n    --SmartThemeBorderColor: rgba(32, 33, 36, 1);\n            --\x3e\n              <div>--SmartThemeBodyColor</div>\n              <div></div>\n              <div>--SmartThemeEmColor</div>\n              <div></div>\n              <div>--SmartThemeUnderlineColor</div>\n              <div></div>\n              <div>--SmartThemeQuoteColor</div>\n              <div></div>\n              <div>--SmartThemeBlurTintColor</div>\n              <div></div>\n              <div>--SmartThemeChatTintColor</div>\n              <div></div>\n              <div>--SmartThemeUserMesBlurTintColor</div>\n              <div></div>\n              <div>--SmartThemeBotMesBlurTintColor</div>\n              <div></div>\n              <div>--SmartThemeShadowColor</div>\n              <div></div>\n              <div>--SmartThemeBorderColor</div>\n              <div></div>\n            </div>\n          </div>\n\n          <div class="k3rn-dropdown-extension_block flex-container">\n            <textarea v-model="settings.style" :placeholder="DEFAULT_STYLE"></textarea>\n          </div>\n\n          <div class="k3rn-dropdown-extension_block flex-container">\n            <input class="menu_button" type="submit" :value="`恢复默认`" @click="fillOverrideWithDefaults" />\n          </div>\n\n          <hr class="sysHR" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { storeToRefs } from \'pinia\';\nimport { DEFAULT_STYLE, useConfigStore } from \'./conf\';\n\nconst { settings } = storeToRefs(useConfigStore());\n\nconst fillOverrideWithDefaults = () => {\n  toastr.success(\'已恢复默认样式！\');\n  useConfigStore().$patch({ settings: { style: DEFAULT_STYLE } });\n};\n<\/script>\n\n<style scoped>\nselect {\n  border: 2px rgba(128, 128, 128, 0.5) solid !important;\n}\n\n.k3rn-color-grid {\n  display: grid;\n  width: max(80%, 400px);\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  font-size: 0.8em;\n  font-family: \'Consolas\', Courier, monospace;\n}\n\n.k3rn-color-grid > div:nth-child(even) {\n  width: 100%;\n}\n\n/**\n--SmartThemeEmColor: rgba(150, 150, 150, 1);\n    --SmartThemeUnderlineColor: rgba(79, 154, 255, 0.9);\n    --SmartThemeQuoteColor: rgba(89, 146, 221, 1);\n    --SmartThemeBlurTintColor: rgba(52, 58, 62, 0.8);\n    --SmartThemeChatTintColor: rgba(42, 42, 42, 0);\n    --SmartThemeUserMesBlurTintColor: rgba(32, 32, 32, 0.57);\n    --SmartThemeBotMesBlurTintColor: rgba(0, 0, 0, 0.61);\n    --SmartThemeShadowColor: rgba(32, 33, 36, 1);\n    --SmartThemeBorderColor: rgba(32, 33, 36, 1);\n     */\n\n.k3rn-color-grid > div:nth-child(2) {\n  background-color: var(--SmartThemeBodyColor, #000);\n}\n.k3rn-color-grid > div:nth-child(4) {\n  background-color: var(--SmartThemeEmColor, #000);\n}\n.k3rn-color-grid > div:nth-child(6) {\n  background-color: var(--SmartThemeUnderlineColor, #000);\n}\n.k3rn-color-grid > div:nth-child(8) {\n  background-color: var(--SmartThemeQuoteColor, #000);\n}\n.k3rn-color-grid > div:nth-child(10) {\n  background-color: var(--SmartThemeBlurTintColor, #000);\n}\n.k3rn-color-grid > div:nth-child(12) {\n  background-color: var(--SmartThemeChatTintColor, #000);\n}\n.k3rn-color-grid > div:nth-child(14) {\n  background-color: var(--SmartThemeUserMesBlurTintColor, #000);\n}\n.k3rn-color-grid > div:nth-child(16) {\n  background-color: var(--SmartThemeBotMesBlurTintColor, #000);\n}\n.k3rn-color-grid > div:nth-child(18) {\n  background-color: var(--SmartThemeShadowColor, #000);\n}\n.k3rn-color-grid > div:nth-child(20) {\n  background-color: var(--SmartThemeBorderColor, #000);\n}\n</style>\n'],sourceRoot:''}]);const d=i},185(e){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var o='',r=void 0!==n[5];return n[4]&&(o+='@supports ('.concat(n[4],') {')),n[2]&&(o+='@media '.concat(n[2],' {')),r&&(o+='@layer'.concat(n[5].length>0?' '.concat(n[5]):'',' {')),o+=e(n),r&&(o+='}'),n[2]&&(o+='}'),n[4]&&(o+='}'),o}).join('')},n.i=function(e,o,r,t,a){'string'==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var d=0;d<this.length;d++){var l=this[d][0];null!=l&&(i[l]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]='@layer'.concat(c[5].length>0?' '.concat(c[5]):'',' {').concat(c[1],'}')),c[5]=a),o&&(c[2]?(c[1]='@media '.concat(c[2],' {').concat(c[1],'}'),c[2]=o):c[2]=o),t&&(c[4]?(c[1]='@supports ('.concat(c[4],') {').concat(c[1],'}'),c[4]=t):c[4]=''.concat(t)),n.push(c))}},n}},563(e){e.exports=function(e){var n=e[1],o=e[3];if(!o)return n;if('function'==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),t='sourceMappingURL=data:application/json;charset=utf-8;base64,'.concat(r),a='/*# '.concat(t,' */');return[n].concat([a]).join('\n')}return[n].join('\n')}},164(e,n,o){var r=o(407);r.__esModule&&(r=r.default),'string'==typeof r&&(r=[[e.id,r,'']]),r.locals&&(e.exports=r.locals);(0,o(424).A)('a39b403e',r,!1,{ssrId:!0})},313(e,n){n.A=(e,n)=>{const o=e.__vccOpts||e;for(const[e,r]of n)o[e]=r;return o}},424(e,n,o){function r(e,n){for(var o=[],r={},t=0;t<n.length;t++){var a=n[t],i=a[0],d={id:e+':'+t,css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(d):o.push(r[i]={id:i,parts:[d]})}return o}o.d(n,{A:()=>h});var t='undefined'!=typeof document;if('undefined'!=typeof DEBUG&&DEBUG&&!t)throw new Error('vue-style-loader cannot be used in a non-browser environment. Use { target: \'node\' } in your Webpack config to indicate a server-rendering environment.');var a={},i=t&&(document.head||document.getElementsByTagName('head')[0]),d=null,l=0,s=!1,c=function(){},v=null,p='data-vue-ssr-id',m='undefined'!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,n,o,t){s=o,v=t||{};var i=r(e,n);return u(i),function(n){for(var o=[],t=0;t<i.length;t++){var d=i[t];(l=a[d.id]).refs--,o.push(l)}n?u(i=r(e,n)):i=[];for(t=0;t<o.length;t++){var l;if(0===(l=o[t]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete a[l.id]}}}}function u(e){for(var n=0;n<e.length;n++){var o=e[n],r=a[o.id];if(r){r.refs++;for(var t=0;t<r.parts.length;t++)r.parts[t](o.parts[t]);for(;t<o.parts.length;t++)r.parts.push(f(o.parts[t]));r.parts.length>o.parts.length&&(r.parts.length=o.parts.length)}else{var i=[];for(t=0;t<o.parts.length;t++)i.push(f(o.parts[t]));a[o.id]={id:o.id,refs:1,parts:i}}}}function g(){var e=document.createElement('style');return e.type='text/css',i.appendChild(e),e}function f(e){var n,o,r=document.querySelector('style['+p+'~="'+e.id+'"]');if(r){if(s)return c;r.parentNode.removeChild(r)}if(m){var t=l++;r=d||(d=g()),n=T.bind(null,r,t,!1),o=T.bind(null,r,t,!0)}else r=g(),n=k.bind(null,r),o=function(){r.parentNode.removeChild(r)};return n(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;n(e=r)}else o()}}var C,b=(C=[],function(e,n){return C[e]=n,C.filter(Boolean).join('\n')});function T(e,n,o,r){var t=o?'':r.css;if(e.styleSheet)e.styleSheet.cssText=b(n,t);else{var a=document.createTextNode(t),i=e.childNodes;i[n]&&e.removeChild(i[n]),i.length?e.insertBefore(a,i[n]):e.appendChild(a)}}function k(e,n){var o=n.css,r=n.media,t=n.sourceMap;if(r&&e.setAttribute('media',r),v.ssrId&&e.setAttribute(p,n.id),t&&(o+='\n/*# sourceURL='+t.sources[0]+' */',o+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+' */'),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}}},a={};function i(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={id:e,exports:{}};return t[e](o,o.exports,i),o.exports}i.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return i.d(n,{a:n}),n},i.d=(e,n)=>{for(var o in n)i.o(n,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},i.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),i.r=e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})};const d=_;const l=z,s=Vue,c='k3rn-dropdown-active',v='k3rn-dropdown-global',p='k3rn-dropdown-overhaul',m='k3rn-dropdown-overhaul',h=`\n  #${v} {\n      margin: 0;\n      position: fixed;\n      z-index: 99999;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.4);\n      max-height: 400px;\n      display: flex;\n      flex-direction: column;\n      background: var(--SmartThemeBlurTintColor, #1a1a1a);\n      color: var(--SmartThemeBodyColor, #eee);\n      border: 1px solid var(--SmartThemeBorderColor, #444);\n      border-radius: 4px;\n\n      overflow: hidden;\n      backdrop-filter: blur(8px);\n      -webkit-backdrop-filter: blur(8px);\n  }\n\n  #${v} .search-wrapper {\n      padding: 8px;\n      background: rgba(0, 0, 0, 0.2);\n      border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n      flex-shrink: 0;\n  }\n\n  #${v} .search-input {\n      width: 100%;\n      padding: 6px 8px;\n      border-radius: 4px;\n      border: 1px solid rgba(255, 255, 255, 0.2);\n      background: rgba(0, 0, 0, 0.3);\n      color: inherit;\n      outline: none;\n      font-size: 0.9em;\n  }\n  #${v} .search-input:focus {\n      border-color: var(--SmartThemeQuoteColor, #888);\n      background: rgba(0, 0, 0, 0.5);\n  }\n\n  #${v} .options-list {\n      overflow-y: auto;\n      flex-grow: 1;\n      max-height: 300px;\n  }\n\n  #${v} .options-list::-webkit-scrollbar {\n      width: 6px;\n  }\n  #${v} .options-list::-webkit-scrollbar-thumb {\n      background: rgba(255, 255, 255, 0.2);\n      border-radius: 3px;\n  }\n\n  #${v} .option-item {\n      padding: 8px 12px;\n      cursor: pointer;\n      transition: background 0.1s;\n  }\n  #${v} .option-item:hover {\n      background: rgba(128,128,128,0.1);\n  }\n  #${v} .option-item.selected {\n      background: rgba(128,128,128,0.2);\n      font-weight: bold;\n      border-left: 3px solid var(--SmartThemeQuoteColor, #888);\n  }\n  #${v} .no-results {\n      padding: 12px;\n      text-align: center;\n      color: var(--SmartThemeBodyColor, #eee);\n      font-style: italic;\n      display: none;\n  }\n  #${v} .optgroup-header {\n      padding: 3px 12px;\n      font-size: 0.8em;\n      color: var(--SmartThemeQuoteColor, #888);\n      pointer-events: none;\n      background: rgba(128, 128, 128, 0.2);\n  }\n  #${v} .option-item.grouped {\n      padding-left: 24px;\n  }\n`,u=l.z.object({style:l.z.string().default(h)}).prefault({}),g=n('settings',()=>{const e=(0,s.ref)(u.parse(getVariables({type:'script',script_id:getScriptId()})));return(0,s.watchEffect)(()=>{insertOrAssignVariables(r(e.value),{type:'script',script_id:getScriptId()}),f()}),{settings:e}}),f=()=>{$(`#${p}`).remove(),$(`<style id="${p}">${u.parse(getVariables({type:'script',script_id:getScriptId()})).style??h}</style>`).appendTo('head')},C={id:'k3rn-dropdown_container',class:'extension_container'},b={class:'k3rn-dropdown-extension-setting'},T={class:'inline-drawer'},k={class:'inline-drawer-content'},S={class:'k3rn-dropdown-extension_block flex-container'},w=['placeholder'],x=(0,s.defineComponent)({__name:'conf_view',setup(e){const{settings:n}=o(g()),r=()=>{toastr.success('已恢复默认样式！'),g().$patch({settings:{style:h}})};return(e,o)=>((0,s.openBlock)(),(0,s.createElementBlock)('div',C,[(0,s.createElementVNode)('div',b,[(0,s.createElementVNode)('div',T,[o[3]||(o[3]=(0,s.createElementVNode)('div',{class:'inline-drawer-toggle inline-drawer-header'},[(0,s.createElementVNode)('b',null,(0,s.toDisplayString)('下拉选项大修')),(0,s.createElementVNode)('div',{class:'inline-drawer-icon fa-solid fa-circle-chevron-down down'})],-1)),(0,s.createElementVNode)('div',k,[o[1]||(o[1]=(0,s.createStaticVNode)('<div class="k3rn-dropdown-extension_block flex-container" data-v-a55f012c><select data-v-a55f012c><option data-v-a55f012c>示例选项 - EXAMPLE</option><option data-v-a55f012c>That is not dead</option><option data-v-a55f012c>which can eternal lie,</option><option data-v-a55f012c>And with strange aeons</option><option data-v-a55f012c>even death may die.</option></select></div><hr class="sysHR" data-v-a55f012c><div class="k3rn-dropdown-extension_block flex-container" data-v-a55f012c><h3 data-v-a55f012c>样式修改 (DIY)</h3></div><div class="k3rn-dropdown-extension_block flex-container" data-v-a55f012c><label for="k3rn-dropdown-extension-setting" data-v-a55f012c>变量对应色表（随酒馆主题变动）</label><div class="k3rn-color-grid" data-v-a55f012c>\x3c!--\n            --SmartThemeEmColor: rgba(150, 150, 150, 1);\n    --SmartThemeUnderlineColor: rgba(79, 154, 255, 0.9);\n    --SmartThemeQuoteColor: rgba(89, 146, 221, 1);\n    --SmartThemeBlurTintColor: rgba(52, 58, 62, 0.8);\n    --SmartThemeChatTintColor: rgba(42, 42, 42, 0);\n    --SmartThemeUserMesBlurTintColor: rgba(32, 32, 32, 0.57);\n    --SmartThemeBotMesBlurTintColor: rgba(0, 0, 0, 0.61);\n    --SmartThemeShadowColor: rgba(32, 33, 36, 1);\n    --SmartThemeBorderColor: rgba(32, 33, 36, 1);\n            --\x3e<div data-v-a55f012c>--SmartThemeBodyColor</div><div data-v-a55f012c></div><div data-v-a55f012c>--SmartThemeEmColor</div><div data-v-a55f012c></div><div data-v-a55f012c>--SmartThemeUnderlineColor</div><div data-v-a55f012c></div><div data-v-a55f012c>--SmartThemeQuoteColor</div><div data-v-a55f012c></div><div data-v-a55f012c>--SmartThemeBlurTintColor</div><div data-v-a55f012c></div><div data-v-a55f012c>--SmartThemeChatTintColor</div><div data-v-a55f012c></div><div data-v-a55f012c>--SmartThemeUserMesBlurTintColor</div><div data-v-a55f012c></div><div data-v-a55f012c>--SmartThemeBotMesBlurTintColor</div><div data-v-a55f012c></div><div data-v-a55f012c>--SmartThemeShadowColor</div><div data-v-a55f012c></div><div data-v-a55f012c>--SmartThemeBorderColor</div><div data-v-a55f012c></div></div></div>',4)),(0,s.createElementVNode)('div',S,[(0,s.withDirectives)((0,s.createElementVNode)('textarea',{'onUpdate:modelValue':o[0]||(o[0]=e=>(0,s.unref)(n).style=e),placeholder:(0,s.unref)(h)},null,8,w),[[s.vModelText,(0,s.unref)(n).style]])]),(0,s.createElementVNode)('div',{class:'k3rn-dropdown-extension_block flex-container'},[(0,s.createElementVNode)('input',{class:'menu_button',type:'submit',value:'恢复默认',onClick:r})]),o[2]||(o[2]=(0,s.createElementVNode)('hr',{class:'sysHR'},null,-1))])])])]))}});i(164);const y=(0,i(313).A)(x,[['__scopeId','data-v-a55f012c']]),A=()=>{const e=$(`.${c}`);e.length&&(e.parents().add(document).off('.k3rn-dropdown-scroll'),e.removeClass(c)),$(`#${v}`).remove()},B=e=>{e.addClass(c);e.parents().add(document).on(`scroll.${m}`,()=>{A()});const n=[];let o=0;const r=(r,t)=>{if('none'===r.css('display'))return;o++;const a=r.text(),i=r.is(':selected'),d=$(`<div class="option-item ${t?'grouped':''} ${i?'selected':''}">${a}</div>`);d.data('type','option'),d.data('search-text',a.toLowerCase()),t&&d.data('group-header',t),d.on('click',n=>{n.stopPropagation();const o=r.val()??'undefined',t=e[0];t.value=o.toString(),t.dispatchEvent(new Event('change',{bubbles:!0})),t.dispatchEvent(new Event('input',{bubbles:!0})),r.trigger('click'),A()}),d.on('mousedown touchstart touchend',e=>e.stopPropagation()),n.push(d)};e.children().each((_,e)=>{const t=$(e);if('optgroup'===e.tagName.toLowerCase()){const e=t.attr('label')||'',a=$(`<div class="optgroup-header">${e}</div>`);a.data('type','optgroup'),n.push(a);const i=o;return t.children('option').each((_,e)=>r($(e),a)),void(o===i&&n.pop())}r(t)});const t=o>7,a=$(`<div id="${v}"></div>`),i=$('<div class="options-list"></div>'),l=$('<div class="no-results">无结果</div>');if(t){const e=$('<div class="search-wrapper"><input type="text" class="search-input" placeholder="搜索…" /></div>'),o=e.find('input');o.on('input',(0,d.debounce)(e=>{const o=e.target.value.toLowerCase().trim();let r=!1;n.forEach(e=>{if('optgroup'===e.data('type'))return void e.css('display',o?'none':'');const n=e.data('search-text');if(!o||n.includes(o)){if(e.css('display',''),r=!0,o){const n=e.data('group-header');n&&n.css('display','')}}else e.css('display','none')}),r?l.hide():l.show()},200)),o.on('mousedown click touchstart touchend',e=>e.stopPropagation()),a.append(e),setTimeout(()=>{Math.min(window.screen.width,window.outerWidth)<=500||(o[0].focus(),o.trigger('focus'))},6)}i.append(n).append(l),a.append(i);const s=e.closest('dialog');s.length?s.append(a):$('body').append(a);const p=e[0].getBoundingClientRect(),h=$(window).scrollTop()||0,u=$(window).scrollLeft()||0;let g=0;if(($(window).height()||0)-p.bottom<350&&p.top>350){const e=a.outerHeight()??300;g=p.top+h-e-4}else g=p.bottom+h+4;const f=Math.max(4,p.left+u);a.css({top:g+'px',left:f+'px',minWidth:Math.max(p.width,200)+'px'}),setTimeout(()=>{const e=i.find('.selected');e.length&&i.scrollTop(e[0].offsetTop-i.height()/2)},7)},E=e=>{if(0!==e.button)return;const n=e.currentTarget,o=$(n);e.preventDefault(),e.stopPropagation();o.hasClass(c)?A():(A(),B(o))},D=()=>{const e=window.parent.document||document;A(),$(`#${p}`).remove(),$(e).off(`.${m}`),$(`.${c}`).removeClass(c)};$(()=>{f();const e=window.parent.document||document;$(e).on(`mousedown.${m}`,'select',E),$(e).on(`click.${m}`,'select',e=>{e.preventDefault()}),$(e).on(`keydown.${m}`,'select',function(e){const n=$(this);if(' '===e.key||'Enter'===e.key){e.preventDefault(),e.stopPropagation();const o=n.hasClass(c);A(),o||B(n)}}),$(e).on(`click.${m}`,e=>{e.target&&(e.target.closest('select')?.length||A())}),$(window).on('pagehide',D)}),$(()=>{const n=(0,s.createApp)(y).use(e()),o=$('<div>').attr('script_id',getScriptId()).appendTo('#extensions_settings2');n.mount(o[0]);const{destroy:r}=function(e='head'){const n=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone()).appendTo(e);return{destroy:()=>n.remove()}}();$(window).on('pagehide',()=>{n.unmount(),o.remove(),r()})});
//# sourceMappingURL=index.js.map